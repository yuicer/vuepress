<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Daily tip 02 | yuicer</title>
    <meta name="description" content="colorful wanted">
    <link rel="icon" href="https://img.yuicer.com/me.config/me.png">
    
    <link rel="preload" href="/assets/css/0.styles.6ff7600f.css" as="style"><link rel="preload" href="/assets/js/app.ee6d65c9.js" as="script"><link rel="preload" href="/assets/js/5.54fca0f7.js" as="script"><link rel="preload" href="/assets/js/3.58dc3b23.js" as="script"><link rel="preload" href="/assets/js/22.b51d73dc.js" as="script"><link rel="prefetch" href="/assets/js/1.c8a07aa3.js"><link rel="prefetch" href="/assets/js/10.1f9563c4.js"><link rel="prefetch" href="/assets/js/11.7dd9afa0.js"><link rel="prefetch" href="/assets/js/12.f6c129db.js"><link rel="prefetch" href="/assets/js/13.659d500d.js"><link rel="prefetch" href="/assets/js/14.d92ea7dc.js"><link rel="prefetch" href="/assets/js/15.35a99002.js"><link rel="prefetch" href="/assets/js/16.cfb76f42.js"><link rel="prefetch" href="/assets/js/17.f61491e3.js"><link rel="prefetch" href="/assets/js/18.598697ce.js"><link rel="prefetch" href="/assets/js/19.63037746.js"><link rel="prefetch" href="/assets/js/20.afa70ccb.js"><link rel="prefetch" href="/assets/js/21.c8c27fd4.js"><link rel="prefetch" href="/assets/js/23.5b1d66d4.js"><link rel="prefetch" href="/assets/js/24.26e08afb.js"><link rel="prefetch" href="/assets/js/25.2d45454d.js"><link rel="prefetch" href="/assets/js/26.31c8daaa.js"><link rel="prefetch" href="/assets/js/27.c2833bcc.js"><link rel="prefetch" href="/assets/js/28.4c52c5a1.js"><link rel="prefetch" href="/assets/js/29.129894cc.js"><link rel="prefetch" href="/assets/js/30.b5e0ad03.js"><link rel="prefetch" href="/assets/js/4.773c1692.js"><link rel="prefetch" href="/assets/js/6.0b34b6a9.js"><link rel="prefetch" href="/assets/js/7.6b8d49c0.js"><link rel="prefetch" href="/assets/js/8.8aa3921c.js"><link rel="prefetch" href="/assets/js/9.eed9d028.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6ff7600f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-e233e1e2 data-v-6617a306><header class="navbar" data-v-e233e1e2><a href="/" class="home-link router-link-active"><!----> <span class="site-name">yuicer</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Links" class="dropdown-title"><span class="title">Links</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://twitter.com/yuicer1" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Twitter
</a></li><li class="dropdown-item"><!----> <a href="https://space.bilibili.com/3069623" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blibili
</a></li></ul></div></div> <a href="https://github.com/yuicer/vuepress-theme-yuicer" target="_blank" rel="noopener noreferrer" class="repo-link">GitHub</a></nav></div></header> <div class="wrapper" data-v-e233e1e2><main class="page" data-v-e233e1e2 data-v-6617a306> <div class="page-title" data-v-e233e1e2 data-v-6617a306>Daily tip 02</div> <div class="tags" data-v-e233e1e2 data-v-6617a306><div data-v-e233e1e2 data-v-6617a306><a href="/tag/砖头/" data-v-6617a306>砖头</a></div> <div class="time" data-v-e233e1e2 data-v-6617a306><span data-v-e233e1e2 data-v-6617a306>Dec 9  2019</span></div></div> <div class="img" data-v-e233e1e2 data-v-6617a306><img src="/img/20191209.png" data-v-e233e1e2 data-v-6617a306></div> <!----> <div class="theme-yuicer-content content__default" data-v-6617a306><h2 id="import-file-from-outside-of-src"><a href="#import-file-from-outside-of-src" class="header-anchor">#</a> import file from outside of src</h2> <p>cause of some shit reasons, I have to import files from anther project into this project. track some problems in this process</p> <ol><li>create-react-app
<a href="https://github.com/facebook/create-react-app/issues/834" target="_blank" rel="noopener noreferrer">create-react-app/issues/834<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://stackoverflow.com/questions/44114436/the-create-react-app-imports-restriction-outside-of-src-directory" target="_blank" rel="noopener noreferrer">hack solutions<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ol> <p>delete ModuleScopePlugin will release this limit. but you also need to setup loaders yourself.</p> <p>examples</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> resolve <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'path'</span>
<span class="token function">chainWebpack</span><span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   config<span class="token punctuation">.</span><span class="token keyword">module</span><span class="token punctuation">.</span><span class="token function">rule</span><span class="token punctuation">(</span><span class="token string">'your-loader'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>include<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'../your-path'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>through the right way is to use yarn/npm link and make monorepo. but making tsconfig.json is really annoying</strong></p> <h2 id="youtube-dl"><a href="#youtube-dl" class="header-anchor">#</a> <a href="https://github.com/ytdl-org/youtube-dl" target="_blank" rel="noopener noreferrer">youtube-dl<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>youtube-dl is a command line tool to download videos</p> <div class="language-shell line-numbers-mode"><pre class="language-text"><code>brew install youtube-dl
# helpful when download 1080P, it will merge audio and vidwo automatically
brew install ffmpeg
# get download list
youtube-dl -F https://www.youtube.com/watch\?v\=8PYKGIeDZLQ
# download 1080P
youtube-dl -f 137+140  https://www.youtube.com/watch\?v\=8PYKGIeDZLQ
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="git-reset-soft"><a href="#git-reset-soft" class="header-anchor">#</a> git reset --soft</h2> <p>this comand <code>git reset --soft HEAD~1</code> can widthdraw the commit operation</p> <h2 id="d-ts-map"><a href="#d-ts-map" class="header-anchor">#</a> d.ts.map</h2> <p>if npm package provides the d.ts.map file. then you will jump to (.ts) file rather then (.d.ts) file when click the export constant.
and this need you can not ignore ts files in .npmigonre.</p> <h2 id="webpack-compile-ts-project-to-version-using-in-node-or-browser"><a href="#webpack-compile-ts-project-to-version-using-in-node-or-browser" class="header-anchor">#</a> webpack compile ts project to version using in node or browser</h2> <ol><li><p>excepting setting <code>output.libraryTarget: 'umd',</code>, you need also set <code>output.globalObject: this</code> <a href="https://webpack.js.org/configuration/output/#outputglobalobject" target="_blank" rel="noopener noreferrer">globalObject<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> wtf?</p></li> <li><p>to avoid annoying <code>default</code> below
you need to add <code>libraryExport: 'default'</code> to solve that</p></li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> xxx <span class="token keyword">from</span> <span class="token string">'xxx'</span>
<span class="token keyword">const</span> xxx <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>default

<span class="token keyword">import</span> xxx <span class="token keyword">from</span> <span class="token string">'xxx'</span>
<span class="token keyword">const</span> xxx <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><form><table><thead><tr><th>pattern</th> <th>export commonJS</th> <th>consume from common js</th> <th>export from ESM</th> <th>consume from ESM</th></tr></thead> <tbody><tr><td>1: normal export</td> <td><code>module.exports.cool =</code></td> <td><code>const { cool } = require(&quot;x&quot;)</code></td> <td><code>export const cool = </code></td> <td><code>import { cool } from &quot;x&quot;</code></td></tr> <tr><td>2: default export</td> <td><code>module.exports.default = </code> (not a special case!)</td> <td><code>const { default } = require(&quot;x&quot;)</code></td> <td><code>export default ...</code></td> <td><code>import cool from &quot;x&quot;</code> (any other name works as well)*</td></tr> <tr><td>3: replace entire module export</td> <td><code>module.exports = something cool</code></td> <td><code>const cool = require(&quot;x&quot;)</code></td> <td>Not possible! People <em>try</em> to achieve this with <code>default</code>, but it's an entirely different beast</td> <td><code>import * as cool from &quot;X&quot;</code></td></tr></tbody></table></form></div> <div class="page-nav" data-v-e233e1e2 data-v-6617a306><p class="inner" data-v-e233e1e2 data-v-6617a306><span class="prev" data-v-e233e1e2 data-v-6617a306><a href="/2019/12/16/downloadfile/" class="prev" data-v-6617a306><span data-v-6617a306>←</span>
            DownloadFile
          </a></span> <span class="next" data-v-e233e1e2 data-v-6617a306><a href="/2019/12/01/countingimg/" class="next" data-v-6617a306>
            Counting Shape
            <span data-v-6617a306>→</span></a></span></p></div> </main></div></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.ee6d65c9.js" defer></script><script src="/assets/js/5.54fca0f7.js" defer></script><script src="/assets/js/3.58dc3b23.js" defer></script><script src="/assets/js/22.b51d73dc.js" defer></script>
  </body>
</html>
