<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>elephants | yuicer</title>
    <meta name="generator" content="VuePress 1.5.3">
    <link rel="icon" href="https://img.yuicer.com/me.config/me.png">
    <meta name="description" content="colorful wanted">
    <link rel="preload" href="/assets/css/0.styles.ffb71519.css" as="style"><link rel="preload" href="/assets/js/app.8262f120.js" as="script"><link rel="preload" href="/assets/js/5.e6504259.js" as="script"><link rel="preload" href="/assets/js/3.c45ac5e6.js" as="script"><link rel="preload" href="/assets/js/26.51179f86.js" as="script"><link rel="prefetch" href="/assets/js/1.cb2da64e.js"><link rel="prefetch" href="/assets/js/10.ecc8db5c.js"><link rel="prefetch" href="/assets/js/11.aa7f837a.js"><link rel="prefetch" href="/assets/js/12.b3ce3282.js"><link rel="prefetch" href="/assets/js/13.6387423c.js"><link rel="prefetch" href="/assets/js/14.a02b309a.js"><link rel="prefetch" href="/assets/js/15.582f94ab.js"><link rel="prefetch" href="/assets/js/16.a1ecc7f5.js"><link rel="prefetch" href="/assets/js/17.467e7c9c.js"><link rel="prefetch" href="/assets/js/18.33e6bed8.js"><link rel="prefetch" href="/assets/js/19.f04b04b6.js"><link rel="prefetch" href="/assets/js/20.12e44737.js"><link rel="prefetch" href="/assets/js/21.817d5ccb.js"><link rel="prefetch" href="/assets/js/22.19a7d06a.js"><link rel="prefetch" href="/assets/js/23.5d440780.js"><link rel="prefetch" href="/assets/js/24.86d64ade.js"><link rel="prefetch" href="/assets/js/25.4cbafa45.js"><link rel="prefetch" href="/assets/js/27.507e2f00.js"><link rel="prefetch" href="/assets/js/28.97cf2eea.js"><link rel="prefetch" href="/assets/js/29.f555f172.js"><link rel="prefetch" href="/assets/js/30.264a884d.js"><link rel="prefetch" href="/assets/js/31.d9fe96c4.js"><link rel="prefetch" href="/assets/js/32.a3bce440.js"><link rel="prefetch" href="/assets/js/33.26491496.js"><link rel="prefetch" href="/assets/js/34.4e872ffb.js"><link rel="prefetch" href="/assets/js/35.ac4b3b24.js"><link rel="prefetch" href="/assets/js/4.be308c07.js"><link rel="prefetch" href="/assets/js/6.b216ed74.js"><link rel="prefetch" href="/assets/js/7.9a79d26d.js"><link rel="prefetch" href="/assets/js/8.75ec8028.js"><link rel="prefetch" href="/assets/js/9.6a5764bc.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ffb71519.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" style="background-image:url(https://img.yuicer.com/bg/winter.jpg),linear-gradient(#ccc 0%,#ccc 100%);background-attachment:fixed;background-position-x:50%;background-position-y:0%;background-blend-mode:multiply;background-repeat:no-repeat;background-size:cover;" data-v-7024d1ce data-v-15f16916><header class="navbar" data-v-7024d1ce><a href="/" class="home-link router-link-active"><!----> <span class="site-name">yuicer</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Links" class="dropdown-title"><span class="title">Links</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://twitter.com/yuicer1" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Twitter
</a></li><li class="dropdown-item"><!----> <a href="https://space.bilibili.com/3069623" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blibili
</a></li></ul></div></div> <a href="https://github.com/yuicer/vuepress-theme-yuicer" target="_blank" rel="noopener noreferrer" class="repo-link">GitHub</a></nav></div></header> <div class="wrapper" data-v-7024d1ce><main class="page" data-v-7024d1ce data-v-15f16916> <div class="page-title" data-v-7024d1ce data-v-15f16916>elephants</div> <div class="tags" data-v-7024d1ce data-v-15f16916><!----> <div class="time" data-v-7024d1ce data-v-15f16916><span data-v-7024d1ce data-v-15f16916>May 16  2021</span></div></div> <audio controls="controls" loop="loop" autoplay="autoplay" src="https://music.163.com/song/media/outer/url?id=4909229.mp3" data-v-7024d1ce data-v-15f16916></audio> <div class="theme-yuicer-content content__default" data-v-15f16916><h2 id="碎语"><a href="#碎语" class="header-anchor">#</a> 碎语</h2> <blockquote><p>人间如隙时光如驹</p></blockquote> <p>不管怎么说，这是久违的又一次更新。</p> <iframe src="/demo/demo_210516/index.html" frameborder="no" marginwidth="0" marginheight="0" width="100%" height="250"></iframe> <h2 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h2> <p>这是一个从准备写到实际开始写拖了一年多的文章。起源是最开始去食堂吃饭，要从地下车库走，然后地下车库的墙上就画着一副大象图。第一次看到的时候就想起了不知道从哪里听到的一句谚语。用四个参数就可以画出一个大象。回去查了一下还真的有一篇论文是关于这个的，下面简单意译了一下论文内容</p> <p><a href="https://fermatslibrary.com/s/drawing-an-elephant-with-four-complex-parameters" target="_blank" rel="noopener noreferrer">Drawing an elephant with four complex parameters<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>弗里曼·戴森（Freeman Dyson）人生的转折点发生在1953年春季的一次颁奖典礼上，当时恩里科·费米（Enrico Fermi）引用约翰尼·冯·诺依曼（Johnny vonNeumann）的话，批评了戴森模型的复杂性：“我可以用四个参数拟合大象，甚至可以用五个参数使他摆动鼻子。” 从那以后，它成为了物理学家的一句著名的谚语。但是还没有任何人去成功的证明这句话。</p> <p>为了去参数化一头大象，我们注意到可以把大象轮廓转化成一系列 x(t), y(t) 的点集。随着时间的变化，x,y 点沿着大象轮廓进行变化。如果速度均匀，则 t 可以看作是周长。下面我们把 x(t), y(t) 展开为傅立叶级数的形式</p> <img src="/img/20210516-1.png" style="max-width:400px;"> <p>这里 A B 参数为展开的系数，较低的指标 k 代表为当前是傅立叶的第几展开，较高的参数则代表当前是 x 的展开还是 y 的展开</p> <p>使用这种展开为 xy 坐标系的方式，我们可以通过构造轮廓来分析图像，并且计算出展开式的系数（使用傅立叶分析的标准方法）。通过不断的代入小间距 t，生成的点可以平滑图像，这种方式和用像素点保存图像的方式比，可以大大减少表达一副图像的所需信息。举个例子， Székely et al 用这种方法分割磁共振成像数据。 使用相似的方法分析红细胞的形状，并使用球谐函数展开作为傅立叶坐标展开的3D化</p> <p>在下面这种情况下，这些傅立叶系数表达了对给定形状的一个最完美的拟合。k=0 时对应于形状的质心。k=1 时对应于最好的椭圆拟合。随着 k 的提高，可以不断的修改最终图像的美观性，达到完全拟合。通过把这些系数结合到复数中，我们可以得到4组复数参数，来等效拟合大象图像。第五个参数的实数参数代表为一个摇晃参数，它用来代表鼻子连接到身体的 y 【论文这里是 x ，但是实际使用下来应该对应的是 y】值，其虚数部分代表大象眼睛。所有的参数都在表中有表示出来。</p> <img src="/img/20210516-2.png"> <p>最后产生的图像比较简单卡通，但是仍然可以看出来它是一个大象，尽管使用傅立叶来构建图像不是一个新使用，但是我们也清楚地证明了其在减少描述二维轮廓所需的参数数量方面的有用性。在参考资料5中，我们可以找到它的可视化工具</p> <p>现在我们使用这个工具，用我们得到的四个参数开始来拟合大象。图b</p> <img src="/img/20210516-3.png" style="max-width:400px;"> <p>在 1975 年，同样有人用了 30 个系数来描述出了下图a</p> <img src="/img/20210516-4.png" style="max-width:400px;"> <p>通过消除幅度小于最大幅度的10％的分量，我们获得了一个近似频谱。通过不断消减构造，可以把它最终表达为4个复数系数，同时也证明了谚语的正确性。【我可以用四个参数拟合大象，甚至可以用五个参数使他摆动鼻子。】</p> <h2 id="原理"><a href="#原理" class="header-anchor">#</a> 原理</h2> <p><a href="https://zh.wikipedia.org/wiki/%E5%82%85%E9%87%8C%E5%8F%B6%E7%BA%A7%E6%95%B0" target="_blank" rel="noopener noreferrer">傅立叶级数<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <img src="/img/20210516-5.png"> <p>在数学中，傅里叶级数是把类似波的函数表示成简单正弦波的方式。更正式地说，对于满足狄利克雷定理的周期函数，其傅里叶级数是由一组简单振荡函数（正弦与余弦函数，或等价的复指数函数）的加权和表示的方法。离散时间傅里叶变换是一个周期函数，通常用定义傅里叶级数的项进行定义。另一个应用的例子是Z变换，将傅里叶级数简化为特殊情形 |z|=1。傅里叶级数也是采样定理原始证明的核心。</p> <p>举个🌰，方波</p> <p><a href="https://www.desmos.com/calculator/mkecnyyktk?lang=zh-CN" target="_blank" rel="noopener noreferrer">方波的数学形式<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
一个题外话，方波中存在一个固定的冲量，<a href="https://zh.wikipedia.org/wiki/%E5%90%89%E5%B8%83%E6%96%AF%E7%8E%B0%E8%B1%A1" target="_blank" rel="noopener noreferrer">吉布斯现象<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <iframe src="/demo/demo_210516/index2.html" frameborder="no" marginwidth="0" marginheight="0" width="100%" height="550"></iframe> <h2 id="代码验证"><a href="#代码验证" class="header-anchor">#</a> 代码验证</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> elephant <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> π <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> τ <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token constant">P</span> <span class="token operator">=</span> <span class="token number">256</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> theta <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> width <span class="token operator">=</span> <span class="token number">600</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> height <span class="token operator">=</span> <span class="token number">600</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> scale <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>

<span class="token function-variable function">FourierCoeffcient</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">real<span class="token punctuation">,</span> imag</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>real <span class="token operator">=</span> real<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>imag <span class="token operator">=</span> imag<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//  p1 = 50 - 30j</span>
<span class="token comment">//  p2 = 18 +  8j</span>
<span class="token comment">//  p3 = 12 - 10j</span>
<span class="token comment">//  p4 = -14 - 60j</span>
<span class="token comment">//  p5 = 40 + 20j</span>

<span class="token comment">// x(t): [  0. +0.j , -60.-30.j , 0. +8.j , -0.-10.j , 0. +0.j  ,   0. +0.j]</span>
<span class="token comment">// y(t): [  0. +0.j ,   0.+50.j , 0.+18.j , 12. +0.j , 0. +0.j  , -14. +0.j]</span>
<span class="token keyword">var</span> <span class="token constant">P0</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FourierCoeffcient</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token constant">P1</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FourierCoeffcient</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token constant">P2</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FourierCoeffcient</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token constant">P3</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FourierCoeffcient</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token constant">P4</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FourierCoeffcient</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">14</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token constant">P5</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FourierCoeffcient</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function-variable function">Point</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>radius <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">makeElephant</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> x<span class="token punctuation">,</span> y<span class="token punctuation">;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token constant">P</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x <span class="token operator">=</span>
      <span class="token comment">// sin</span>
      <span class="token number">0</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">*</span> τ <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">/</span> <span class="token constant">P</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
      <span class="token constant">P1</span><span class="token punctuation">.</span>imag <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">*</span> τ <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">/</span> <span class="token constant">P</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
      <span class="token constant">P2</span><span class="token punctuation">.</span>imag <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> τ <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">/</span> <span class="token constant">P</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
      <span class="token constant">P3</span><span class="token punctuation">.</span>imag <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">*</span> τ <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">/</span> <span class="token constant">P</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
      <span class="token number">0</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token number">4</span> <span class="token operator">*</span> τ <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">/</span> <span class="token constant">P</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
      <span class="token number">0</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">*</span> τ <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">/</span> <span class="token constant">P</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
      <span class="token comment">// cos</span>
      <span class="token number">0</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">*</span> τ <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">/</span> <span class="token constant">P</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
      <span class="token constant">P4</span><span class="token punctuation">.</span>imag <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">*</span> τ <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">/</span> <span class="token constant">P</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
      <span class="token number">0</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> τ <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">/</span> <span class="token constant">P</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
      <span class="token number">0</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">*</span> τ <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">/</span> <span class="token constant">P</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
      <span class="token number">0</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token number">4</span> <span class="token operator">*</span> τ <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">/</span> <span class="token constant">P</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
      <span class="token number">0</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">*</span> τ <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">/</span> <span class="token constant">P</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    y <span class="token operator">=</span>
      <span class="token comment">// sin</span>
      <span class="token number">0</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">*</span> τ <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">/</span> <span class="token constant">P</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
      <span class="token constant">P1</span><span class="token punctuation">.</span>real <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">*</span> τ <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">/</span> <span class="token constant">P</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
      <span class="token constant">P2</span><span class="token punctuation">.</span>real <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> τ <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">/</span> <span class="token constant">P</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
      <span class="token number">0</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">*</span> τ <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">/</span> <span class="token constant">P</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
      <span class="token number">0</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token number">4</span> <span class="token operator">*</span> τ <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">/</span> <span class="token constant">P</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
      <span class="token number">0</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">*</span> τ <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">/</span> <span class="token constant">P</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
      <span class="token comment">// cos</span>
      <span class="token number">0</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">*</span> τ <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">/</span> <span class="token constant">P</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
      <span class="token number">0</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">*</span> τ <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">/</span> <span class="token constant">P</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
      <span class="token number">0</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> τ <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">/</span> <span class="token constant">P</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
      <span class="token constant">P3</span><span class="token punctuation">.</span>real <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">*</span> τ <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">/</span> <span class="token constant">P</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
      <span class="token number">0</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token number">4</span> <span class="token operator">*</span> τ <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">/</span> <span class="token constant">P</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
      <span class="token constant">P4</span><span class="token punctuation">.</span>real <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">*</span> τ <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">/</span> <span class="token constant">P</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    elephant<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// eye</span>
  elephant<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token constant">P5</span><span class="token punctuation">.</span>imag<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token constant">P5</span><span class="token punctuation">.</span>imag<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">'steelblue'</span><span class="token punctuation">;</span>

  <span class="token keyword">let</span> delta <span class="token operator">=</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>τ <span class="token operator">*</span> theta<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">;</span>

  elephant<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">p<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> _p <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 这里根据 delta 做一个动画</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>_p<span class="token punctuation">.</span>x <span class="token operator">&gt;</span> <span class="token constant">P5</span><span class="token punctuation">.</span>real<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      _p<span class="token punctuation">.</span>y <span class="token operator">+=</span> <span class="token punctuation">(</span>_p<span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token constant">P5</span><span class="token punctuation">.</span>real<span class="token punctuation">)</span> <span class="token operator">*</span> delta<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// body</span>
    ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span>_p<span class="token punctuation">.</span>x<span class="token punctuation">,</span> _p<span class="token punctuation">.</span>y<span class="token punctuation">,</span> _p<span class="token punctuation">.</span>radius<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> τ<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// eye</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> elephant<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'black'</span><span class="token punctuation">;</span>
      ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">setTransform</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">makeElephant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  ctx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">;</span>
  theta <span class="token operator">+=</span> <span class="token number">0.1</span><span class="token punctuation">;</span>
  <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br></div></div></div> <div class="page-nav" data-v-7024d1ce data-v-15f16916><p class="inner" data-v-7024d1ce data-v-15f16916><!----> <span class="next" data-v-7024d1ce data-v-15f16916><a href="/2020/11/22/poison-and-rats/" class="next" data-v-15f16916>
            poison and rats
            <span data-v-15f16916>→</span></a></span></p></div> </main></div></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.8262f120.js" defer></script><script src="/assets/js/5.e6504259.js" defer></script><script src="/assets/js/3.c45ac5e6.js" defer></script><script src="/assets/js/26.51179f86.js" defer></script>
  </body>
</html>
