<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Daily tip 03 | yuicer</title>
    <meta name="generator" content="VuePress 1.5.3">
    <link rel="icon" href="https://img.yuicer.com/me.config/me.png">
    <meta name="description" content="colorful wanted">
    <link rel="preload" href="/assets/css/0.styles.62583dbf.css" as="style"><link rel="preload" href="/assets/js/app.e8e3cb7e.js" as="script"><link rel="preload" href="/assets/js/5.e6504259.js" as="script"><link rel="preload" href="/assets/js/3.c45ac5e6.js" as="script"><link rel="preload" href="/assets/js/24.86d64ade.js" as="script"><link rel="prefetch" href="/assets/js/1.cb2da64e.js"><link rel="prefetch" href="/assets/js/10.ecc8db5c.js"><link rel="prefetch" href="/assets/js/11.aa7f837a.js"><link rel="prefetch" href="/assets/js/12.b3ce3282.js"><link rel="prefetch" href="/assets/js/13.6387423c.js"><link rel="prefetch" href="/assets/js/14.a02b309a.js"><link rel="prefetch" href="/assets/js/15.582f94ab.js"><link rel="prefetch" href="/assets/js/16.a1ecc7f5.js"><link rel="prefetch" href="/assets/js/17.467e7c9c.js"><link rel="prefetch" href="/assets/js/18.33e6bed8.js"><link rel="prefetch" href="/assets/js/19.f04b04b6.js"><link rel="prefetch" href="/assets/js/20.12e44737.js"><link rel="prefetch" href="/assets/js/21.817d5ccb.js"><link rel="prefetch" href="/assets/js/22.19a7d06a.js"><link rel="prefetch" href="/assets/js/23.5d440780.js"><link rel="prefetch" href="/assets/js/25.4cbafa45.js"><link rel="prefetch" href="/assets/js/26.6e78a00e.js"><link rel="prefetch" href="/assets/js/27.507e2f00.js"><link rel="prefetch" href="/assets/js/28.97cf2eea.js"><link rel="prefetch" href="/assets/js/29.f555f172.js"><link rel="prefetch" href="/assets/js/30.264a884d.js"><link rel="prefetch" href="/assets/js/31.d9fe96c4.js"><link rel="prefetch" href="/assets/js/32.a3bce440.js"><link rel="prefetch" href="/assets/js/33.26491496.js"><link rel="prefetch" href="/assets/js/34.4e872ffb.js"><link rel="prefetch" href="/assets/js/35.ac4b3b24.js"><link rel="prefetch" href="/assets/js/4.be308c07.js"><link rel="prefetch" href="/assets/js/6.b216ed74.js"><link rel="prefetch" href="/assets/js/7.9a79d26d.js"><link rel="prefetch" href="/assets/js/8.75ec8028.js"><link rel="prefetch" href="/assets/js/9.6a5764bc.js">
    <link rel="stylesheet" href="/assets/css/0.styles.62583dbf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" style="background-image:url(https://img.yuicer.com/bg/winter.jpg),linear-gradient(#ccc 0%,#ccc 100%);background-attachment:fixed;background-position-x:50%;background-position-y:0%;background-blend-mode:multiply;background-repeat:no-repeat;background-size:cover;" data-v-7024d1ce data-v-15f16916><header class="navbar" data-v-7024d1ce><a href="/" class="home-link router-link-active"><!----> <span class="site-name">yuicer</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Links" class="dropdown-title"><span class="title">Links</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://twitter.com/yuicer1" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Twitter
</a></li><li class="dropdown-item"><!----> <a href="https://space.bilibili.com/3069623" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blibili
</a></li></ul></div></div> <a href="https://github.com/yuicer/vuepress-theme-yuicer" target="_blank" rel="noopener noreferrer" class="repo-link">GitHub</a></nav></div></header> <div class="wrapper" data-v-7024d1ce><main class="page" data-v-7024d1ce data-v-15f16916> <div class="page-title" data-v-7024d1ce data-v-15f16916>Daily tip 03</div> <div class="tags" data-v-7024d1ce data-v-15f16916><div data-v-7024d1ce data-v-15f16916><a href="/tag/砖头/" data-v-15f16916>砖头</a></div> <div class="time" data-v-7024d1ce data-v-15f16916><span data-v-7024d1ce data-v-15f16916>Jul 13  2020</span></div></div> <!----> <div class="theme-yuicer-content content__default" data-v-15f16916><h2 id="npm-deprecate"><a href="#npm-deprecate" class="header-anchor">#</a> npm deprecate</h2> <p><a href="https://docs.npmjs.com/cli/v7/commands/npm-deprecate" target="_blank" rel="noopener noreferrer">deprecate<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>to info users warning</p> <h2 id="lerna-skip-changed-check"><a href="#lerna-skip-changed-check" class="header-anchor">#</a> lerna skip changed  check</h2> <p><code>--force-publish</code></p> <h2 id="mobile-browser-event-quene"><a href="#mobile-browser-event-quene" class="header-anchor">#</a> mobile browser event quene</h2> <p>touchstart touchend mousemove mousedoen mouseup click</p> <h2 id="git-delete-latest-tag"><a href="#git-delete-latest-tag" class="header-anchor">#</a> git delete latest tag</h2> <p><code>git tag -d $(git log --date-order --tags --simplify-by-decoration --pretty=format:'%d' | head -1 | tr -d '()' | sed 's/,* tag://g')</code></p> <h2 id="reset-first-git-commit"><a href="#reset-first-git-commit" class="header-anchor">#</a> reset first git commit</h2> <p><code>git update-ref -d HEAD</code> <a href="https://git-scm.com/docs/git-update-ref" target="_blank" rel="noopener noreferrer">update-ref<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>you need to delete current branch and push force again</p> <h2 id="git-delete-origin-tag"><a href="#git-delete-origin-tag" class="header-anchor">#</a> git delete origin tag</h2> <div class="language-s line-numbers-mode"><pre class="language-text"><code>git push origin --delete &lt;tagname&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="lerna-skip-partial-packages-using-leran-publish"><a href="#lerna-skip-partial-packages-using-leran-publish" class="header-anchor">#</a> lerna: skip partial packages using leran publish</h2> <p>lerna did support <code>lerna run xxx --scope pkg1</code>. but <code>scope</code> do not work when using <code>publish</code></p> <p>there has a lot of issues about this, but none of them mentioned how to solve it, cause the maintainer insist that</p> <blockquote><p>Because it breaks the fundamental mechanism Lerna uses to determine which packages need to be published? Absolutely nothing stopping you from not placing several packages in the same monorepo that apparently shouldn't be.<br>
------ @evocateur</p></blockquote> <blockquote><p>As I noted above, this is impossible due to the manner in which lerna coordinates versions with git tags (and the diff since the last one is what indicates which packages should be published).
------ @evocateur</p></blockquote> <blockquote><p>If they are both independent, and you don’t want to publish them at the same time, then don’t use lerna, it’s clearly not necessary for your use case.
------ @evocateur</p></blockquote> <p>until..... I fonud <a href="https://github.com/lerna/lerna/commit/a9b9f97457e4e4b0cac7f4ce562458d921a1f9be" target="_blank" rel="noopener noreferrer">this_commit<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>I test the <code>lerna publish --no-private</code>, it did work for me on version 3.22.1</p> <p>but stil <code>lerna publish --help</code> did not show this config 😃</p> <h2 id="yarn-workspace-nohoist"><a href="#yarn-workspace-nohoist" class="header-anchor">#</a> yarn workspace nohoist</h2> <p><a href="https://classic.yarnpkg.com/blog/2018/02/15/nohoist/" target="_blank" rel="noopener noreferrer">doc_here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>workspaces looks good. but sometimes it's not so that smart. it juset can't completely figure out the package should place in the root node_modules or the child project node_modules</p> <p>so like the artificial intelligence, it need some help.</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">// root project package.json</span>
<span class="token string">&quot;workspaces&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
  <span class="token string">&quot;packages&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;./A&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;./B&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">&quot;nohoist&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;**/react-native&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">// child project package.json</span>
<span class="token string">&quot;workspaces&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;nohoist&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;react-native&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;react-native/**&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="unhandledrejection"><a href="#unhandledrejection" class="header-anchor">#</a> unhandledRejection</h2> <p>In frontend project, sometimes, somehow, there will be somewhy error like <code>unhandledRejection</code></p> <p>but this error do not show where it is 😦</p> <p>so with the code below, you can catch them easily!</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code>process<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'unhandledRejection'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>reason<span class="token punctuation">,</span> p<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Unhandled Rejection at: Promise'</span><span class="token punctuation">,</span> p<span class="token punctuation">,</span> <span class="token string">'reason:'</span><span class="token punctuation">,</span> reason<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// application specific logging, throwing an error, or other logic here</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="disable-ds-store-auto-generated-in-mac"><a href="#disable-ds-store-auto-generated-in-mac" class="header-anchor">#</a> disable .ds_store auto generated in mac</h2> <p><a href="https://zh.wikipedia.org/zh-hans/.DS_Store" target="_blank" rel="noopener noreferrer">.DS_Store<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <code>defaults write com.apple.desktopservices DSDontWriteNetworkStores -bool TRUE</code></p> <h2 id="make-alias-with-zsh"><a href="#make-alias-with-zsh" class="header-anchor">#</a> make alias with zsh</h2> <p><code>alias [custom-alias]=&quot;[command]&quot;</code>
example
<code>alias devbox=&quot;ssh xxx@xx.xx.xx.xx&quot;</code></p> <h2 id="dyld-brew"><a href="#dyld-brew" class="header-anchor">#</a> dyld brew</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>dyld: Library not loaded: /usr/local/opt/icu4c/lib/libicui18n.64.dylib
  Referenced from: /usr/local/bin/node
  Reason: image not found
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>this problem is causing by error link node version. you can use <code>brew upgrade node</code> or <code>brew upgrade</code> to upgrade all packages.</p></div> <div class="page-nav" data-v-7024d1ce data-v-15f16916><p class="inner" data-v-7024d1ce data-v-15f16916><span class="prev" data-v-7024d1ce data-v-15f16916><a href="/2020/10/25/ts-type-guard/" class="prev" data-v-15f16916><span data-v-15f16916>←</span>
            ts-type-guard
          </a></span> <span class="next" data-v-7024d1ce data-v-15f16916><a href="/2020/05/08/daily-tip2/" class="next" data-v-15f16916>
            Daily tip 02
            <span data-v-15f16916>→</span></a></span></p></div> </main></div></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.e8e3cb7e.js" defer></script><script src="/assets/js/5.e6504259.js" defer></script><script src="/assets/js/3.c45ac5e6.js" defer></script><script src="/assets/js/24.86d64ade.js" defer></script>
  </body>
</html>
